<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Firefly — Your Route</title>
    <link rel="stylesheet" href="/static/css/more_style.css">
</head>
<body>

<div class="page">

    <div class="top-header">
        <img src="/static/photos/лого.jpg" class="logo-left">
        <h2 class="direction">Your <span>Route</span></h2>
        <div></div>
    </div>

    <div class="intro">
        Generated hiking route based on your preferences
    </div>

    <div class="route">
    </div>

    <!-- <div class="legend page-break">
        <h4>Legend</h4>
        <ul>
            <li><b>Camp</b> — overnight stop</li>
            <li><b>Pass</b> — mountain pass</li>
        </ul>
    </div> -->

</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

    const raw = sessionStorage.getItem("routeResult");
    if (!raw) return;

    const route = JSON.parse(raw);
    renderRoute(route);
});


function renderRoute(route) {

    const container = document.querySelector(".route");
    container.innerHTML = "";

    route.forEach(day => {

        const dayBlock = document.createElement("div");
        dayBlock.className = "no-break";

        const title = document.createElement("h3");
        title.textContent = `Day ${day.day}`;
        dayBlock.appendChild(title);

        day.steps.forEach((step, index) => {

            const point = document.createElement("div");
            point.className = "point";

            point.innerHTML = `
                <h3>${step.from.name}</h3>
                <p>${step.from.description || ""}</p>
                <small>${step.to.name}</small>
            `;

            dayBlock.appendChild(point);

            if (index < day.steps.length - 1) {
                const arrow = document.createElement("div");
                arrow.className = "arrow";
                dayBlock.appendChild(arrow);
            }
        });

        container.appendChild(dayBlock);
    });
}
</script>

</body>
</html>
